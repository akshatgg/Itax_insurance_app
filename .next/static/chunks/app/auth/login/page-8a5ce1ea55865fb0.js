(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{3130:(e,s,a)=>{Promise.resolve().then(a.bind(a,9598))},5731:(e,s,a)=>{"use strict";a.d(s,{A:()=>n,AuthProvider:()=>i});var t=a(5155),r=a(2115);let l=(0,r.createContext)({token:null,setToken:()=>{},isInitialized:!1}),i=e=>{let{children:s}=e,[a,i]=(0,r.useState)(null),[n,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e&&i(e),d(!0)},[]),(0,t.jsx)(l.Provider,{value:{token:a,setToken:i,isInitialized:n},children:s})},n=()=>(0,r.useContext)(l)},8915:(e,s,a)=>{"use strict";a.d(s,{db:()=>n,j:()=>d});var t=a(3915),r=a(5317),l=a(3004);let i=(0,t.Wp)({apiKey:"AIzaSyC7HdmXgysmn7AfhiICnu3PVAj-f17vPjs",authDomain:"itax-7c8ea.firebaseapp.com",projectId:"itax-7c8ea",storageBucket:"itax-7c8ea.firebasestorage.app",messagingSenderId:"532409625604",appId:"1:532409625604:web:545814898b227685209951",measurementId:"G-FR8DCX5P10"}),n=(0,r.aU)(i),d=(0,l.xI)(i)},9598:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(5155),r=a(2115),l=a(6874),i=a.n(l),n=a(5695),d=a(3004),o=a(8915),c=a(5317),u=a(3568),m=a(5731);function g(){let{setToken:e}=(0,m.A)(),s=(0,n.useRouter)(),[a,l]=(0,r.useState)({email:"",password:""}),[g,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),p=e=>{let{name:s,value:a}=e.target;l(e=>({...e,[s]:a})),b("")},f=async t=>{t.preventDefault(),x(!0),b("");try{let t=(await (0,d.x9)(o.j,a.email,a.password)).user;if(t){let a=(0,c.H9)(o.db,"users",t.uid),r=await (0,c.x7)(a),l={uid:t.uid,email:t.email,name:t.displayName||"User",isLoggedIn:!0};if(r.exists()){let s=r.data();l={...l,name:s.name||t.displayName||"User",...s};let a=await t.getIdToken();localStorage.setItem("token",a),e(a)}else await (0,c.BN)(a,{name:t.displayName||"User",email:t.email,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()});localStorage.setItem("user",JSON.stringify(l)),u.Ay.success("Login successful!"),s.push("/dashboard")}}catch(s){console.error("Login error:",s);let e="An error occurred during login";switch(s.code){case"auth/user-not-found":e="No account found with this email. Please register first.";break;case"auth/wrong-password":e="Incorrect password. Please try again.";break;case"auth/invalid-email":e="Invalid email address format.";break;case"auth/too-many-requests":e="Too many failed attempts. Please try again later.";break;case"auth/user-disabled":e="This account has been disabled.";break;case"auth/invalid-credential":e="Invalid credentials. Please check your email and password.";break;default:e=s.message||"Login failed. Please try again."}b(e),u.Ay.error(e)}finally{x(!1)}},y=async()=>{x(!0),b("");try{let e=new d.HF,a=(await (0,d.df)(o.j,e)).user;if(a){let e=(0,c.H9)(o.db,"users",a.uid);(await (0,c.x7)(e)).exists()?await (0,c.BN)(e,{lastLogin:new Date().toISOString()},{merge:!0}):await (0,c.BN)(e,{name:a.displayName||"User",email:a.email,photoURL:a.photoURL||"",provider:"google",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()});let t={uid:a.uid,email:a.email,name:a.displayName||"User",photoURL:a.photoURL||"",isLoggedIn:!0};localStorage.setItem("user",JSON.stringify(t)),u.Ay.success("Google sign-in successful!"),s.push("/dashboard")}}catch(s){console.error("Google sign-in error:",s);let e=s.message||"Google sign-in failed";b(e),u.Ay.error(e)}finally{x(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)(i(),{href:"/",className:"flex items-center justify-center space-x-2 mb-6",children:[(0,t.jsx)("span",{className:"text-3xl",children:"\uD83D\uDEE1ï¸"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-blue-600",children:"SecureLife"})]}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Sign in to your account"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Access your insurance dashboard"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[h&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",name:"email",value:a.email,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",name:"password",value:a.password,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,t.jsx)(i(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700",children:"Forgot password?"})]}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Signing in...":"Sign In"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{onClick:y,disabled:g,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("span",{className:"mr-2",children:"\uD83D\uDCF1"}),"Google"]}),(0,t.jsxs)("button",{disabled:!0,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("span",{className:"mr-2",children:"\uD83D\uDCDE"}),"OTP (Coming Soon)"]})]})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(i(),{href:"/register",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up here"})]})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,6073,6874,4016,8006,8441,1684,7358],()=>s(3130)),_N_E=e.O()}]);